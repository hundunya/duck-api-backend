# duck-api-backend
这是一个基于Spring Boot2开发的Duck API开放平台。本平台包括网关、阿里支付、rabbitmq推送通知等功能。
**【API开放平台】by 滴滴鸭**

线上访问地址：[Duck API](https://duck-api.hundunya.cn)

###### Duck API开放平台功能

1. **登录/注册**

   登录：用户输入账号密码登录，后端根据加密密码判断是否登录成功

   注册：用户输入账号和两次密码注册，后端保存加密后的密码

2. **个人信息修改**

   个人信息包括用户昵称、个性签名、用户头像，其中头像可拖动上传，图片通过**腾讯云对象存储**保存

3. **密码修改**

   用户输入旧密码和两次新密码，根据旧密码校验结果判断是否修改密码

4. **密钥查看/更换**

   用户可点击查看按钮查看密钥，同时也可以点击更换按钮更换密钥。默认展示密钥唯一标识（accessKey），而密钥（secretKey）展示为一串星号。（个人使用的密钥生成算法相对简单，为保证密钥安全性可以使用更复杂的密钥算法）

5. **接口增删改查（仅管理员）**

   接口参数：
    1. 接口名称（name）
    2. 接口描述（description）
    3. 接口地址（url）
    4. 请求方法（method）
    5. 接口单价（price，注：接口单价为购买一次调用接口的价格）
    6. 请求头（requestHeader）
    7. 响应头（responseHeader）
    8. 请求参数（requestParam）
    9. 响应参数（responseParam）

   接口增删改查目前仅管理员可操作，并且不支持用户上传接口（后续考虑完成这个功能）

6. **接口上线/下线（仅管理员）**

   接口上线/下线操作仅管理员可以操作，上线操作在后端会自动根据请求参数类型生成对应参数，以及根据设置的请求方法调用对应的请求方法，同时SDK可以根据接口参数自动添加请求头。（目前接口仅支持JSON格式的请求数据，同时数据生     成不是很合理，后续需要优化一下）

7. **接口调用**

   前端输入JSON格式参数，后端调用SDK进行自动封装，并自动调用对应接口

8. **调用计数**

   接口调用成功则进行计数（目前是只要接口返回状态为200都算成功，个人认为这里可能存在一点问题）

9. **调用次数购买**

   当接口调用次数使用完后，用户可以通过支付宝扫码支付购买调用次数

11. **网关限流**

网关层使用了redis令牌桶算法进行接口调用限流

12. **全局异常处理**

全局异常处理主要为两个方面：

13. Dubbo服务层的异常处理

Dubbo层将所有业务异常进行捕获，并将异常封装为字符串返回

14. 网关层的异常处理

网关层会将网关的所有异常捕获并封装为字符串返回
